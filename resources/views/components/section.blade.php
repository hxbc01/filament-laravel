 <!-- Hero Section -->
 <section id="hero" class="hero section">

     <div class="container" data-aos="fade-up" data-aos-delay="100">

         <div class="row align-items-center">
             <div class="col-lg-6">
                 <div class="hero-content" data-aos="fade-up" data-aos-delay="200">
                     <h1 class="mb-4">
                         Selamat Datang <br>
                         Aplikasi Sistem<br>
                         <span class="accent-text">Informasi Kepegawaian</span>
                     </h1>

                     <div class="hero-buttons">
                         <a href="/admin" class="btn btn-primary me-0 me-sm-2 mx-1">Dashboard</a>
                     </div>
                 </div>
             </div>

             <div class="col-lg-6">
                 <div class="hero-image" data-aos="zoom-out" data-aos-delay="300">
                     <img src="assets/img/illustration-1.webp" alt="Hero Image" class="img-fluid">
                 </div>
             </div>
         </div>
     </div>

 </section><!-- /Hero Section -->

 <!-- About Section -->
 <section id="about" class="about section">

     <div class="container" data-aos="fade-up" data-aos-delay="100">

         <div class="row gy-4 align-items-center justify-content-between">

             <div class="col-xl-5" data-aos="fade-up" data-aos-delay="200">
                 <h2 class="about-title">Apa Itu SIIKAN?</h2>
                 <p class="about-description">SIIKAN adalah sistem informasi kepegawaian Kota Metro</p>

                 <div class="row feature-list-wrapper">
                     <h2 class="about-title">Core Values ASN BerAKHLAK</h2>
                     <div class="col-md-6">
                         <ul class="feature-list">
                             <li><i class="bi bi-check-circle-fill"></i>Berorientasi Pelayanan </li>
                             <li><i class="bi bi-check-circle-fill"></i>Akuntabel</li>
                             <li><i class="bi bi-check-circle-fill"></i>Kompeten</li>
                             <li><i class="bi bi-check-circle-fill"></i>Harmonis</li>
                         </ul>
                     </div>
                     <div class="col-md-6">
                         <ul class="feature-list">
                             <li><i class="bi bi-check-circle-fill"></i>Loyal</li>
                             <li><i class="bi bi-check-circle-fill"></i>Adaptif</li>
                             <li><i class="bi bi-check-circle-fill"></i>Kolaboratif</li>
                         </ul>
                     </div>
                 </div>
             </div>

             <div class="col-xl-6" data-aos="fade-up" data-aos-delay="300">
                 <div class="image-wrapper">
                     <div class="images position-relative" data-aos="zoom-out" data-aos-delay="400">
                         <img src="assets/img/upacara.webp" alt="Business Meeting" class="img-fluid main-image rounded-4">
                         <img src="assets/img/upacara2.webp" alt="Team Discussion" class="img-fluid small-image rounded-4">
                     </div>
                 </div>
             </div>
         </div>

     </div>

 </section><!-- /About Section -->

 <!-- Features Section -->
 <section id="features" class="features section">

     <!-- Section Title -->
     <div class="container section-title" data-aos="fade-up">
         <h2>Grafik Pegawai</h2>
         <p>Implementasi Data Pegawai Berbentuk Grafik</p>
     </div><!-- End Section Title -->

     <div class="container">

         <div class="d-flex justify-content-center">

             <ul class="nav nav-tabs" data-aos="fade-up" data-aos-delay="100">

                 <li class="nav-item">
                     <a class="nav-link active show" data-bs-toggle="tab" data-bs-target="#features-tab-1">
                         <h4>Cuti</h4>
                     </a>
                 </li><!-- End tab nav item -->

                 <li class="nav-item">
                     <a class="nav-link" data-bs-toggle="tab" data-bs-target="#features-tab-2">
                         <h4>Pensiun</h4>
                     </a><!-- End tab nav item -->

                 </li>
             </ul>

         </div>

         <div class="tab-content" data-aos="fade-up" data-aos-delay="200">

             <div class="tab-pane fade active show" id="features-tab-1">
                 <div class="row">
                     <div class="col-lg-6 order-2 order-lg-1 mt-3 mt-lg-0 d-flex flex-column justify-content-center">
                         <h3>Data Cuti Pegawai</h3>
                         <div id="chart">
                         </div>
                     </div>
                     <div class="col-lg-6 order-1 order-lg-2 text-center">
                         <img src="assets/img/features-illustration-1.webp" alt="" class="img-fluid">
                     </div>
                 </div>
             </div><!-- End tab content item -->

             <div class="tab-pane fade" id="features-tab-2">
                 <div class="row">
                     <div class="col-lg-6 order-2 order-lg-1 mt-3 mt-lg-0 d-flex flex-column justify-content-center">
                         <h3>Data Pensiun Pegawai</h3>
                         <div id="pensiun-chart"></div>
                     </div>
                     <div class="col-lg-6 order-1 order-lg-2 text-center">
                         <img src="assets/img/features-illustration-2.webp" alt="" class="img-fluid">
                     </div>
                 </div>
             </div><!-- End tab content item -->

             <div class="tab-pane fade" id="features-tab-3">
                 <div class="row">
                     <div class="col-lg-6 order-2 order-lg-1 mt-3 mt-lg-0 d-flex flex-column justify-content-center">
                         <h3>Voluptatibus commodi accusamu</h3>
                         <ul>
                             <li><i class="bi bi-check2-all"></i> <span>Ullamco laboris nisi ut aliquip ex ea commodo consequat.</span></li>
                             <li><i class="bi bi-check2-all"></i> <span>Duis aute irure dolor in reprehenderit in voluptate velit.</span></li>
                             <li><i class="bi bi-check2-all"></i> <span>Provident mollitia neque rerum asperiores dolores quos qui a. Ipsum neque dolor voluptate nisi sed.</span></li>
                         </ul>
                         <p class="fst-italic">
                             Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore
                             magna aliqua.
                         </p>
                     </div>
                     <div class="col-lg-6 order-1 order-lg-2 text-center">
                         <img src="assets/img/features-illustration-3.webp" alt="" class="img-fluid">
                     </div>
                 </div>
             </div><!-- End tab content item -->

         </div>

     </div>

 </section><!-- /Features Section -->

 <!-- Features Cards Section -->
 <section id="features-cards" class="features-cards section">

     <div class="container">

         <div class="row gy-4">
             <h3>Layanan Kepegawaian</h3>
             <div class="col-xl-3 col-md-6" data-aos="zoom-in" data-aos-delay="100">
                 <div class="feature-box orange">
                     <i class="bi bi-award"></i>
                     <h4>Layanan Pensiun</h4>
                 </div>
             </div><!-- End Feature Borx-->

             <div class="col-xl-3 col-md-6" data-aos="zoom-in" data-aos-delay="200">
                 <div class="feature-box blue">
                     <i class="bi bi-patch-check"></i>
                     <h4>Layanan Kepangkatan</h4>
                 </div>
             </div><!-- End Feature Borx-->

             <div class="col-xl-3 col-md-6" data-aos="zoom-in" data-aos-delay="300">
                 <div class="feature-box green">
                     <i class="bi bi-sunrise"></i>
                     <h4>Layanan Pengadaan Pegawai</h4>
                 </div>
             </div><!-- End Feature Borx-->

             <div class="col-xl-3 col-md-6" data-aos="zoom-in" data-aos-delay="400">
                 <div class="feature-box red">
                     <i class="bi bi-shield-check"></i>
                     <h4>Layanan Pengaduan</h4>
                 </div>
             </div><!-- End Feature Borx-->

         </div>

     </div>

 </section>
 <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
 <script>
     document.addEventListener("DOMContentLoaded", function() {

         function loadCutiChart() {

             const chartContainer = document.querySelector("#chart");

             fetch("{{ route('cuti.getData') }}", {
                     method: "POST",
                     headers: {
                         "Content-Type": "application/json",
                         "X-CSRF-TOKEN": "{{ csrf_token() }}"
                     },
                 })
                 .then(response => response.json())
                 .then(data => {
                     console.log(data);

                     if (!data || !data.data) {
                         console.error("Data tidak valid:", data);
                         return;
                     }

                     const categories = data.categories;
                     const series = Object.keys(data.data).map(key => ({
                         name: key,
                         data: data.data[key]
                     }));

                     const options = {
                         chart: {
                             type: 'bar',
                             height: 350,
                             stacked: true
                         },
                         series: series,
                         xaxis: {
                             categories: categories
                         },
                         colors: ['#FF5733', '#33B5FF'],
                         title: {
                             text: "Jumlah Cuti Pegawai per Tahun",
                             align: 'center'
                         },
                         tooltip: {
                             y: {
                                 formatter: val => `${val} pegawai`
                             }
                         },
                         legend: {
                             position: 'top'
                         }
                     };

                     chartContainer.innerHTML = '';
                     const chart = new ApexCharts(chartContainer, options);
                     chart.render();
                 })
                 .catch(error => console.error("Error:", error));
         }

         loadCutiChart();


         function loadChartPensiun(tahun = new Date().getFullYear()) {

             const chartContainer = document.querySelector("#pensiun-chart");

             fetch("{{ route('pensiun.getData') }}", {
                     method: "POST",
                     headers: {
                         "Content-Type": "application/json",
                         "X-CSRF-TOKEN": "{{ csrf_token() }}"
                     },
                     body: JSON.stringify({
                         tahun: tahun
                     })
                 })
                 .then(response => response.json())
                 .then(data => {
                     const options = {
                         chart: {
                             type: 'bar',
                             height: 350,
                             stacked: true
                         },
                         series: Object.keys(data.series).map(key => ({
                             name: key,
                             data: data.series[key]
                         })),
                         xaxis: {
                             categories: data.categories
                         },
                         title: {
                             text: 'Jumlah Pensiun Pegawai per Tahun',
                             align: 'center'
                         },
                         legend: {
                             position: 'top'
                         },
                         tooltip: {
                             y: {
                                 formatter: val => `${val} pegawai`
                             }
                         }
                     };

                     chartContainer.innerHTML = '';
                     const chart = new ApexCharts(chartContainer, options);
                     chart.render();
                 })
                 .catch(error => console.error("Error:", error));
         }

         loadChartPensiun();
     });
 </script>
